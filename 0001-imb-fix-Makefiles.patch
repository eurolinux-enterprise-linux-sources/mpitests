From 78ada0a984f588f56d2a997a1da870467c87fa0d Mon Sep 17 00:00:00 2001
From: Michal Schmidt <mschmidt@redhat.com>
Date: Tue, 5 Jul 2016 21:53:49 +0200
Subject: [PATCH] imb: fix Makefiles

---
 src/Makefile.base |  2 +-
 src/make_mpich    | 10 +---------
 2 files changed, 2 insertions(+), 10 deletions(-)

diff --git a/src/Makefile.base b/src/Makefile.base
index c5feb537cf..5986b6293a 100644
--- a/src/Makefile.base
+++ b/src/Makefile.base
@@ -97,7 +97,7 @@ clean:
 	/bin/rm -f *.o *~ PI* core IMB-IO IMB-EXT IMB-MPI1 IMB-NBC IMB-RMA IMB-IO.mic IMB-EXT.mic IMB-MPI1.mic IMB-NBC.mic IMB-RMA.mic exe_io exe_ext exe_mpi1 exe_nbc exe_rma
 
 .c.o:
-	$(CC) $(MPI_INCLUDE) $(CPPFLAGS) -D$(CPP) $(OPTFLAGS) -c $*.c
+	$(CC) $(CPPFLAGS) -D$(CPP) $(OPTFLAGS) -c $*.c
 
 # DEPENDENCIES
 IMB_declare.h:	IMB_settings.h IMB_comm_info.h IMB_settings_io.h IMB_bnames_mpi1.h \
diff --git a/src/make_mpich b/src/make_mpich
index 035b24e13a..549d01a195 100644
--- a/src/make_mpich
+++ b/src/make_mpich
@@ -1,17 +1,9 @@
 # Enter root directory of mpich install
-MPI_HOME=
-
-MPICC=$(shell find ${MPI_HOME} -name mpicc -print)
 
 NULL_STRING :=
-ifneq (,$(findstring /bin/mpicc,${MPICC}))
-MPI_INCLUDE := -I${MPI_HOME}/include
-else
-$(error Variable MPI_HOME="${MPI_HOME}" does not seem to contain a valid mpicc)
-endif
 LIB_PATH    =
 LIBS        = 
-CC          = ${MPI_HOME}/bin/mpicc 
+CC          = mpicc 
 OPTFLAGS    = -O3
 CLINKER     = ${CC}
 LDFLAGS     =
-- 
2.7.4

